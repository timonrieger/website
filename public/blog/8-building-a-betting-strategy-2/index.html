<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Building a Betting Strategy (2) | timonrieger.de</title>
<meta name=keywords content="data-analysis,backtest"><meta name=description content="Simulating an Over 0.5 Goals Strategy with Parameter Tuning"><meta name=author content="Timon Rieger"><link rel=canonical href=https://timonrieger.de/blog/8-building-a-betting-strategy-2/><link crossorigin=anonymous href=/assets/css/stylesheet.a2aff6ee6596f3f4d4641a97ef2215e6a756b753c1fc5eed3ef59318e95ff298.css integrity="sha256-oq/27mWW8/TUZBqX7yIV5qdWt1PB/F7tPvWTGOlf8pg=" rel="preload stylesheet" as=style><link rel=icon href=https://timonrieger.de/assets/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://timonrieger.de/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://timonrieger.de/favicon-32x32.png><link rel=apple-touch-icon href=https://timonrieger.de/apple-touch-icon.png><link rel=mask-icon href=https://timonrieger.de/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://timonrieger.de/blog/8-building-a-betting-strategy-2/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://timonrieger.de/blog/8-building-a-betting-strategy-2/"><meta property="og:site_name" content="timonrieger.de"><meta property="og:title" content="Building a Betting Strategy (2)"><meta property="og:description" content="Simulating an Over 0.5 Goals Strategy with Parameter Tuning"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2024-12-09T00:00:00+00:00"><meta property="article:modified_time" content="2024-12-09T00:00:00+00:00"><meta property="article:tag" content="Data-Analysis"><meta property="article:tag" content="Backtest"><meta property="og:image" content="https://timonrieger.de/images/papermod-cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://timonrieger.de/images/papermod-cover.png"><meta name=twitter:title content="Building a Betting Strategy (2)"><meta name=twitter:description content="Simulating an Over 0.5 Goals Strategy with Parameter Tuning"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blog","item":"https://timonrieger.de/blog/"},{"@type":"ListItem","position":2,"name":"Building a Betting Strategy (2)","item":"https://timonrieger.de/blog/8-building-a-betting-strategy-2/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Building a Betting Strategy (2)","name":"Building a Betting Strategy (2)","description":"Simulating an Over 0.5 Goals Strategy with Parameter Tuning","keywords":["data-analysis","backtest"],"articleBody":"Welcome back to the second part of this series! It has been some time and the teams are already deep into the Bundesliga season. Nevertheless, I don’t want to withhold my results from you. In the previous post, we explored Bundesliga data spanning 14 seasons to analyze patterns in match outcomes, scoring times, and odds evolution. With a basic understanding of these statistics, we now shift focus to simulations.\nThe strategy I will be backtesting today will be betting on over 0.5 goals in the 30th minute if until then no goal has been scored. At the time of writing the odds with these conditions average at around 1.2. The odds are crucial to the profitability of this strategy, so keep that in mind. I will walk you through my analysis and thoughts when writing the code for it. You can find the unfortunately unorganized notebook and the data for this study on Github.\nFor the following study, I used a technique called hyperparameter optimization, which is a common method in Machine Learning to systematically adjust the parameters of a model to improve its performance on a specific task, such as enhancing accuracy, reducing error rates, or optimizing computational efficiency. In my case, I tried to optimize the following parameters to achieve the highest chance of being profitable with my betting strategy:\nx: margin per bet in percent (1-100%) y: max win series before securing profits (1-20) z: cashout after y winning bets (1-100%) Essentially I wanted to see with how much margin x I should bet and after how many winning bets y I should cash out z percent. The idea is that you start with let’s say 100$ initial investments with x=10%, y=5, and z=50%. I would start with 10$ on the first bet. If won I would keep betting with the money I made from the first bet. So if the odds had been 1.16 when I entered the bet, I would now bet with 11.6$ on the second bet. Let’s say I win 5 (y) bets in a row, assuming the odds are 1.16 on all bets I would have 90$ on my account + 20.1$ in my bet. After the winning streak of 5 bets. I would cash out 50% of the 20.1$ to my account balance, bringing me to 100.05$ on my account and 10.05$ left for the sixth bet. You might ask why I didn’t optimize for a simple x% margin per bet, like 10% on every bet for example. As this strategy will have lots of winning bets, as the odds are very small (~1.16), I wanted to have an additional compounding effect in it. I am aware that this adds additional risk, but potentially higher returns in the long run. Additionally, the simple approach has been neutralized by the betting service with a higher probability than my more complex approach. In the end, we have to keep in mind that we essentially try to find a hole in the betting services’s calculations, which is not easy and possibly not manageable to do so.\nI also want to point out that this study does not use any kind of machine learning model more commonly known as AI, by which I don’t refer to LLMs like ChatGPT. As I am currently learning a lot in that field I might add this layer on top of my study in part 3 in the future.\nGoing back to my parameter optimization. By running all 210.000 combinations of the params (100*21*100) I found out that the best settings are the following: x = 23%, y = 6, z = 40%. The following graphs will now always use these settings to perform the simulations of my strategy\nBalance Over Time for Each Simulation This graph shows the balance trajectory for individual simulations. Each line represents one of 1000 simulations of betting on matches with specific odds. The y-axis depicts the balance, and the x-axis tracks the progression of bets placed. The wild fluctuations in the beginning reflect how randomness significantly impacts short-term results. However, some trajectories stabilize over time, revealing the potential for consistent profitability under the right conditions.\nDistribution of Bets Before Losing All Money The histogram shows most simulations end quickly, as seen in the high density on the left side. Outliers skew the mean (red line), indicating in some simulations the money lasts significantly longer than average. The quartiles (q1, q2, q3) provide a clearer representation of typical performance, with the second quartile (q2) aligning closer to the majority’s outcomes. This emphasizes the median as a better indicator of the typical bettor’s experience over the mean. However we also see that about 20% of the simulations pass the 2000 bets and never suffer a total loss. A further interesting exploration would be checking how many bets are placed on average per season to make that chart more accessible.\nMedian Simulation Results This plot depicts the balance progression for the median simulation result. The strategy leads to losses early on, but after about 150 bets, the balance stabilizes. The eventual upward trend indicates a potential recovery phase, though the risk of bankroll depletion remains significant. The mean result differs significantly from the median. A small subset of simulations performed exceptionally well as seen in the first graph, skewing the mean and suggesting having found a really great strategy. It’s a good reminder to assess both mean and median performance metrics when evaluating a strategy.\nConclusion It seems like this strategy can be sort of profitable as seen in the last graph. Nevertheless, we have seen the huge variations of the simulations, so in the end, it seems to be a gamble. You might call it “roulette with a minimal higher chance of winning”. I hope you enjoyed this study!\nAll graphics were created by me using Python and are available for non-commercial use. Please note that the analysis and calculations presented here may contain errors.\n","wordCount":"990","inLanguage":"en","image":"https://timonrieger.de/images/papermod-cover.png","datePublished":"2024-12-09T00:00:00Z","dateModified":"2024-12-09T00:00:00Z","author":{"@type":"Person","name":"Timon Rieger"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://timonrieger.de/blog/8-building-a-betting-strategy-2/"},"publisher":{"@type":"Organization","name":"timonrieger.de","logo":{"@type":"ImageObject","url":"https://timonrieger.de/assets/favicon.ico"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://timonrieger.de/ accesskey=h title="timonrieger.de (Alt + H)">timonrieger.de</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://timonrieger.de/about/ title=About><span>About</span></a></li><li><a href=https://timonrieger.de/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://timonrieger.de/blog/ title=Blog><span>Blog</span></a></li><li><a href=https://timonrieger.de/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://timonrieger.de/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://timonrieger.de/archive/ title=Archive><span>Archive</span></a></li><li><a href=https://timonrieger.de/photos/ title=Photos><span>Photos</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://timonrieger.de/>Home</a>&nbsp;»&nbsp;<a href=https://timonrieger.de/blog/>Blog</a></div><h1 class="post-title entry-hint-parent">Building a Betting Strategy (2)</h1><div class=post-meta><span title='2024-12-09 00:00:00 +0000 UTC'>December 9, 2024</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Timon Rieger&nbsp;|&nbsp;<a href=https://github.com/timonrieger/website/tree/main/content/blog/8-building-a-betting-strategy-2/index.md rel="noopener noreferrer" target=_blank>Edit</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#balance-over-time-for-each-simulation aria-label="Balance Over Time for Each Simulation">Balance Over Time for Each Simulation</a></li><li><a href=#distribution-of-bets-before-losing-all-money aria-label="Distribution of Bets Before Losing All Money">Distribution of Bets Before Losing All Money</a></li><li><a href=#median-simulation-results aria-label="Median Simulation Results">Median Simulation Results</a></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li></ul></div></details></div><div class=post-content><p>Welcome back to the second part of this series! It has been some time and the teams are already deep into the Bundesliga season. Nevertheless, I don&rsquo;t want to withhold my results from you. In the previous post, we explored Bundesliga data spanning 14 seasons to analyze patterns in match outcomes, scoring times, and odds evolution. With a basic understanding of these statistics, we now shift focus to simulations.</p><p>The strategy I will be backtesting today will be betting on over 0.5 goals in the 30th minute if until then no goal has been scored. At the time of writing the odds with these conditions average at around 1.2. The odds are crucial to the profitability of this strategy, so keep that in mind. I will walk you through my analysis and thoughts when writing the code for it. You can find the unfortunately unorganized notebook and the data for this study on <a href=https://github.com/timonrieger/blog/tree/main/static/assets/code/building-a-profitable-betting-strategy>Github</a>.</p><p>For the following study, I used a technique called hyperparameter optimization, which is a common method in Machine Learning to systematically adjust the parameters of a model to improve its performance on a specific task, such as enhancing accuracy, reducing error rates, or optimizing computational efficiency. In my case, I tried to optimize the following parameters to achieve the highest chance of being profitable with my betting strategy:</p><ul><li>x: margin per bet in percent (1-100%)</li><li>y: max win series before securing profits (1-20)</li><li>z: cashout after y winning bets (1-100%)</li></ul><p>Essentially I wanted to see with how much margin x I should bet and after how many winning bets y I should cash out z percent. The idea is that you start with let&rsquo;s say 100$ initial investments with x=10%, y=5, and z=50%. I would start with 10$ on the first bet. If won I would keep betting with the money I made from the first bet. So if the odds had been 1.16 when I entered the bet, I would now bet with 11.6$ on the second bet. Let&rsquo;s say I win 5 (y) bets in a row, assuming the odds are 1.16 on all bets I would have 90$ on my account + 20.1$ in my bet. After the winning streak of 5 bets. I would cash out 50% of the 20.1$ to my account balance, bringing me to 100.05$ on my account and 10.05$ left for the sixth bet. </p><p>You might ask why I didn&rsquo;t optimize for a simple x% margin per bet, like 10% on every bet for example. As this strategy will have lots of winning bets, as the odds are very small (~1.16), I wanted to have an additional compounding effect in it. I am aware that this adds additional risk, but potentially higher returns in the long run. Additionally, the simple approach has been neutralized by the betting service with a higher probability than my more complex approach. In the end, we have to keep in mind that we essentially try to find a hole in the betting services&rsquo;s calculations, which is not easy and possibly not manageable to do so.</p><p>I also want to point out that this study does not use any kind of machine learning model more commonly known as AI, by which I don&rsquo;t refer to LLMs like ChatGPT. As I am currently learning a lot in that field I might add this layer on top of my study in part 3 in the future.</p><p>Going back to my parameter optimization. By running all 210.000 combinations of the params (100*21*100) I found out that the best settings are the following: x = 23%, y = 6, z = 40%. The following graphs will now always use these settings to perform the simulations of my strategy</p><h2 id=balance-over-time-for-each-simulation>Balance Over Time for Each Simulation<a hidden class=anchor aria-hidden=true href=#balance-over-time-for-each-simulation>#</a></h2><p><img loading=lazy src=/images25.png></p><p>This graph shows the balance trajectory for individual simulations. Each line represents one of 1000 simulations of betting on matches with specific odds. The y-axis depicts the balance, and the x-axis tracks the progression of bets placed. The wild fluctuations in the beginning reflect how randomness significantly impacts short-term results. However, some trajectories stabilize over time, revealing the potential for consistent profitability under the right conditions.</p><h2 id=distribution-of-bets-before-losing-all-money>Distribution of Bets Before Losing All Money<a hidden class=anchor aria-hidden=true href=#distribution-of-bets-before-losing-all-money>#</a></h2><p><img loading=lazy src=/images27.png></p><p>The histogram shows most simulations end quickly, as seen in the high density on the left side. Outliers skew the mean (red line), indicating in some simulations the money lasts significantly longer than average. The quartiles (q1, q2, q3) provide a clearer representation of typical performance, with the second quartile (q2) aligning closer to the majority’s outcomes. This emphasizes the median as a better indicator of the typical bettor’s experience over the mean. However we also see that about 20% of the simulations pass the 2000 bets and never suffer a total loss. A further interesting exploration would be checking how many bets are placed on average per season to make that chart more accessible.</p><h2 id=median-simulation-results>Median Simulation Results<a hidden class=anchor aria-hidden=true href=#median-simulation-results>#</a></h2><p><img loading=lazy src=/images26.png></p><p>This plot depicts the balance progression for the median simulation result. The strategy leads to losses early on, but after about 150 bets, the balance stabilizes. The eventual upward trend indicates a potential recovery phase, though the risk of bankroll depletion remains significant. The mean result differs significantly from the median. A small subset of simulations performed exceptionally well as seen in the first graph, skewing the mean and suggesting having found a really great strategy. It’s a good reminder to assess both mean and median performance metrics when evaluating a strategy.</p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>It seems like this strategy can be sort of profitable as seen in the last graph. Nevertheless, we have seen the huge variations of the simulations, so in the end, it seems to be a gamble. You might call it &ldquo;roulette with a minimal higher chance of winning&rdquo;. I hope you enjoyed this study!</p><p><em>All graphics were created by me using Python and are available for non-commercial use. Please note that the analysis and calculations presented here may contain errors.</em></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://timonrieger.de/tags/data-analysis/>Data-Analysis</a></li><li><a href=https://timonrieger.de/tags/backtest/>Backtest</a></li></ul><nav class=paginav><a class=next href=https://timonrieger.de/blog/7-a-crypto-bullrun-strategy-for-maximizing-profits/><span class=title>Next »</span><br><span>A Crypto Bullrun Strategy for Maximizing Profits</span></a></nav></footer></article></main><footer class=footer><span>© <a href=mailto:contact@timonrieger.de>Timon Rieger</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>